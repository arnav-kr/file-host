function A(q){return document.querySelectorAll(q);}

function $(q){return document.querySelector(q);}

function id(el){return document.getElementById(el);}

function setupHpBars(){

    let Bars=A(".hp-box-progress-bar");

    let HPs = A(".hp-box-hp")

    let bar=A(".hp-box-progress-bar>div");

    for(i=0;i<Bars.length;i++){

        Bars[i].setAttribute("value",100)

        var total=HPs[i].getAttribute("total");

        var color=`hsl(${120},100%,50%)`;

        HPs[i].setAttribute("left",total);

        HPs[i].textContent=`HP: ${total}/${total}`;

        bar[i].style.width=`100%`;

        bar[i].style.backgroundColor=color;

    }

}

class HpBar{

    constructor(index){

        this.i=index;

    }

    setValue(val){

        A(".hp-box-progress-bar")[this.i].setAttribute("value",val);

        var color=`hsl(${120*val/100},100%,50%)`;

        var bar=A(".hp-box-progress-bar>div")[this.i];

        bar.style.width=`${val}%`;

        bar.style.backgroundColor=color;

    }

    reduce(amount){

        var el = A(".hp-box-hp")[this.i];

        var leftHP = el.getAttribute("left");

        var totalHP = el.getAttribute("total");

        this.total=totalHP;

        var remainingHP;

        let percent=leftHP/totalHP*100;

        if(percent > 0 && percent <= 100){

        remainingHP = parseInt(leftHP) - amount;}

        else{remainingHP = leftHP;}

        el.setAttribute("left",remainingHP);

        el.textContent = `HP: ${remainingHP}/${totalHP}`;

        let percentage = parseInt(remainingHP)/parseInt(totalHP)*100;

        this.setValue(percentage);

        this.left = remainingHP;

    }

    increase(amount){

        var el = A(".hp-box-hp")[this.i];

        var leftHP = el.getAttribute("left");

        var totalHP = el.getAttribute("total");

        this.total=totalHP;

        var remainingHP;

        let percent=leftHP/totalHP*100;

        if(percent >= 0 && percent < 100){

        remainingHP = parseInt(leftHP) + amount;}

        else{remainingHP = leftHP;}

        el.setAttribute("left",remainingHP);

        el.textContent = `HP: ${remainingHP}/${totalHP}`;

        let percentage = parseInt(remainingHP)/parseInt(totalHP)*100;

        this.setValue(percentage);

        this.left = remainingHP;

    }

}
